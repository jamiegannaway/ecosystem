<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enterprise Software Periodic Table</title>
<style>
/* Basic Setup & Fonts */
body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    background-color: #F9FAFB;
    margin: 0;
    color: #374151;
}

.triage-table-container {
    padding: 1.5rem;
}

/* Header */
.triage-table-container h1, .triage-table-container h2 {
    font-weight: 300;
    padding: 1rem;
    background-color: white;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    border-radius: 0.5rem;
    margin-bottom: 1rem;
}
.triage-table-container h1 { font-size: 1.875rem; }
.triage-table-container h2 { font-size: 1.5rem; margin-top: 3rem; }

/* Controls: Filter Buttons */
.triage-controls {
    background-color: white;
    padding: 1rem;
    border-radius: 0.5rem;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    margin-bottom: 1rem;
}

.triage-controls label {
    display: block;
    font-size: 0.875rem;
    font-weight: 500;
    margin-bottom: 0.5rem;
}

.filter-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.filter-buttons button {
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
    border-radius: 9999px;
    border: 1px solid #D1D5DB;
    background-color: white;
    cursor: pointer;
    transition: all 0.2s;
}

.filter-buttons button:hover {
    background-color: #F3F4F6;
}

.filter-buttons button.active {
    color: white;
    border-color: #4F46E5;
    background-color: #4F46E5;
}

/* Shared Grid Wrapper & Grid Styles */
.triage-grid-wrapper {
    overflow-x: auto;
    padding-bottom: 1rem;
}

.triage-grid {
    display: grid;
    gap: 0.25rem;
    padding: 0.5rem;
    min-width: 1400px; /* Adjusted for wider layout */
}

.main-grid {
    grid-template-columns: repeat(14, minmax(90px, 1fr));
    grid-template-rows: repeat(5, 100px);
}

.heavy-elements-grid {
    grid-template-columns: repeat(8, minmax(90px, 1fr));
    grid-template-rows: repeat(2, 100px);
    max-width: 900px;
    margin-top: 1rem;
}

/* Element Card Styling */
.element-card {
    position: relative;
    border: 2px solid;
    border-radius: 0.375rem;
    padding: 0.375rem;
    transition: all 0.3s ease-in-out;
    cursor: pointer;
    text-align: left;
    display: flex;
    flex-direction: column;
    height: 100px;
    box-sizing: border-box;
    overflow: hidden;
}

.element-card:hover {
    transform: scale(1.05);
    z-index: 10;
    box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
}

.element-card.filtered-out {
    opacity: 0.2;
    filter: grayscale(1);
}

.element-card:hover.filtered-out {
    opacity: 1;
    filter: grayscale(0);
}

.element-card .symbol {
    font-size: 1.25rem;
    font-weight: 700;
    margin: auto 0;
}

.element-card .name {
    font-size: 0.6rem;
    line-height: 1.2;
    white-space: normal;
}

.element-card .size-info {
    font-size: 0.6rem;
    opacity: 0.7;
    position: absolute;
    top: 4px;
    right: 5px;
    font-weight: 500;
}


/* Modal Styles */
.modal-backdrop {
    position: fixed;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    z-index: 50;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
}

.modal-backdrop.visible {
    opacity: 1;
    visibility: visible;
}

.modal-content {
    position: relative;
    max-width: 50rem;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    background-color: white;
    border-radius: 0.5rem;
    box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);
    padding: 2.5rem;
    transform: scale(0.95);
    transition: transform 0.3s;
}

.modal-backdrop.visible .modal-content {
    transform: scale(1);
}

.modal-close-btn {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    padding: 0.5rem;
    border-radius: 9999px;
    border: none;
    background: none;
    cursor: pointer;
    line-height: 1;
}

.modal-close-btn:hover { background-color: #F3F4F6; }

.modal-header h2 {
    font-size: 1.875rem;
    font-weight: 300;
    margin: 0 0 1rem 0;
}

.modal-body h3 {
    font-size: 1.1rem;
    font-weight: 600;
    margin-top: 1.5rem;
    margin-bottom: 0.5rem;
    border-bottom: 1px solid #E5E7EB;
    padding-bottom: 0.25rem;
}

.modal-body p {
    margin: 0 0 1rem 0;
    line-height: 1.6;
    color: #4B5563;
}

.info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    padding: 1rem;
    background-color: #F9FAFB;
    border-radius: 0.5rem;
    margin-top: 1rem;
}

.info-grid div { font-size: 0.9rem; }
.info-grid span { font-weight: 600; display: block; color: #111827; }

.modal-body a {
    color: #3B82F6;
    text-decoration: none;
}
.modal-body a:hover { text-decoration: underline; }

/* --- MOBILE STYLES --- */
@media (max-width: 767px) {
    .triage-table-container { padding: 0.5rem; }
    .triage-grid-wrapper { overflow-x: scroll; }
    .modal-content { padding: 1.5rem; }
}

</style>
</head>
<body>

<div id="triage-table-root" class="triage-table-container">
    <h1>Enterprise Software Periodic Table</h1>
    <div id="controls-container" class="triage-controls"></div>
    <div class="triage-grid-wrapper">
        <div id="main-grid" class="triage-grid main-grid"></div>
    </div>
    <h2>Heavy Elements (Market Leaders)</h2>
    <div class="triage-grid-wrapper">
        <div id="heavy-elements-grid" class="triage-grid heavy-elements-grid"></div>
    </div>
</div>

<div id="modal-backdrop" class="modal-backdrop">
    <div id="modal-content" class="modal-content"></div>
</div>


<script>
(function() {
    // --- DATA ---
    // Note: companies array now includes all companies. heavyElementIds will be used to separate them.
    const companies = [
        // CLM
        { id: 1, symbol: "DC", name: "DocuSign CLM", marketCategory: "CLM", website: "docusign.com", size: "$2.98B Revenue", description: "DocuSign CLM streamlines the contract lifecycle by automating manual tasks, orchestrating complex workflows, and reducing risk.", differentiator: "Trusted Brand and Ecosystem: Leverages its market-leading position in e-signature to provide an end-to-end agreement platform." },
        { id: 2, symbol: "Cg", name: "Conga CLM", marketCategory: "CLM", website: "conga.com", size: "$388M Est. Revenue", description: "Conga provides a Revenue Lifecycle Management platform that includes CPQ, CLM, and Document Automation solutions to enhance operational efficiency.", differentiator: "Unified Revenue Lifecycle Management: Offers a single, integrated platform for CPQ, CLM, and document automation that is open and API-first." },
        { id: 3, symbol: "Ag", name: "Agiloft", marketCategory: "CLM", website: "agiloft.com", size: "$75M Est. Revenue", description: "Agiloft provides an intelligent, data-first Contract Lifecycle Management (CLM) platform that uses AI to automate tasks and reduce risk.", differentiator: "No-Code Platform Flexibility: Its core differentiator is a highly configurable, no-code platform that allows business users to rapidly deploy and customize complex contract workflows." },
        { id: 4, symbol: "Sr", name: "Sirion", marketCategory: "CLM", website: "sirion.ai", size: "$198.5M Est. Revenue", description: "Sirion is an enterprise CLM platform that uses AI to help businesses create, manage, and analyze contracts, focusing on extracting business value.", differentiator: "Post-Signature Performance Management: Its key differentiator is its focus on managing contract performance after the contract is signed." },
        { id: 5, symbol: "Ic", name: "Ironclad", marketCategory: "CLM", website: "ironcladapp.com", size: "$115M Est. Revenue", description: "Ironclad is an AI-powered contract management platform designed for legal and business teams to handle every aspect of the contract lifecycle.", differentiator: "Legal-Centric Design with All-in-One Platform: Differentiates by being purpose-built for legal teams while remaining accessible to the entire business." },
        // ERP
        { id: 6, symbol: "Or", name: "Oracle Fusion ERP", marketCategory: "ERP", website: "oracle.com/erp/", size: "$614B Market Cap", description: "A complete, modern cloud ERP suite that provides teams with advanced capabilities, such as AI to automate manual processes and analytics to react to market shifts.", differentiator: "AI-Powered Automation and Cloud-Native Design: Differentiates with its extensive use of AI and machine learning to automate a high percentage of financial transactions." },
        { id: 7, symbol: "Ms", name: "Microsoft Dynamics 365", marketCategory: "ERP", website: "dynamics.microsoft.com", size: "$245.1B Revenue", description: "A portfolio of intelligent business applications (ERP and CRM) that connects teams, processes, and data to create exceptional customer experiences.", differentiator: "Deep Integration with Microsoft Ecosystem: Its primary differentiator is its seamless, native integration with the broader Microsoft ecosystem." },
        { id: 8, symbol: "In", name: "Infor CloudSuite", marketCategory: "ERP", website: "infor.com", size: "$3.2B Revenue", description: "Infor provides cloud-based, industry-specific enterprise software solutions that combine deep industry expertise with cutting-edge technology.", differentiator: "Deep Industry-Specific Functionality: Infor's core differentiator is its focus on 'last-mile' functionality tailored to specific micro-verticals." },
        { id: 9, symbol: "Wd", name: "Workday", marketCategory: "ERP", website: "workday.com", size: "$7.26B Revenue", description: "Workday is an AI-powered enterprise platform for managing people and money, providing unified solutions for finance, HR, and planning.", differentiator: "Unified Finance and HR Platform: Its key differentiator is its ground-up, unified architecture that combines financials and HCM on a single platform." },
        { id: 10, symbol: "Ns", name: "NetSuite", marketCategory: "ERP", website: "netsuite.com", size: "~$4.1B Est. Revenue", description: "NetSuite provides a unified business management suite, encompassing ERP/Financials, CRM, and ecommerce.", differentiator: "Unified Cloud Platform for Mid-Market: Differentiates as a true all-in-one cloud business suite designed primarily for small and mid-sized businesses." },
        // S2P
        { id: 11, symbol: "SA", name: "SAP Ariba", marketCategory: "S2P", website: "sap.com", size: "$1B Est. Revenue", description: "SAP Ariba provides cloud-based solutions for spend management, connecting millions of buyers and suppliers globally.", differentiator: "World's Largest B2B Network: Its primary differentiator is the scale of the SAP Business Network, which facilitates trillions of dollars in commerce annually." },
        { id: 12, symbol: "Jg", name: "Jaggaer", marketCategory: "S2P", website: "jaggaer.com", size: "$300M Est. Revenue", description: "JAGGAER offers an AI-powered source-to-pay solution and supplier collaboration platform designed to transform procurement into a value-adding force.", differentiator: "Autonomous Commerce and Industry Focus: Differentiates with its 'Autonomous Commerce' vision, using AI to automate repetitive tasks and provide smart-match recommendations." },
        { id: 13, symbol: "GE", name: "GEP SMART", marketCategory: "S2P", website: "gep.com", size: "586 U.S. Employees", description: "GEP SMART is a cloud-native, AI-powered, unified source-to-pay (S2P) platform for managing both direct and indirect spend.", differentiator: "Unified Platform Designed by Practitioners: Differentiates by being a unified platform designed by procurement professionals with a mobile-native architecture." },
        { id: 14, symbol: "Iv", name: "Ivalua", marketCategory: "S2P", website: "ivalua.com", size: "$134M Total Funding", description: "Ivalua provides a unified Source-to-Pay platform for managing all categories of spend and all suppliers.", differentiator: "Platform Flexibility and Direct Materials Focus: Differentiates through a highly flexible platform that excels at managing complex, direct materials spend." },
        { id: 15, symbol: "Bs", name: "Basware", marketCategory: "S2P", website: "basware.com", size: "$181.1M Revenue", description: "Basware is a global leader in AP Automation and cloud-based Procure-to-Pay (P2P) solutions.", differentiator: "AP Automation and e-Invoicing Network: Differentiates with its deep expertise in Accounts Payable (AP) automation and the world's largest open business network." },
        // ORCH
        { id: 16, symbol: "OL", name: "ORO Labs", marketCategory: "ORCH", website: "orolabs.ai", size: "$82M Total Funding", description: "ORO Labs offers a GenAI procurement orchestration platform that coordinates people, processes, and systems.", differentiator: "No-Code Workflows and User Experience: Differentiates with its focus on a simple, intuitive user experience that requires no training." },
        { id: 17, symbol: "Tr", name: "Tropic", marketCategory: "ORCH", website: "tropic.app", size: "$67.1M Total Funding", description: "Tropic is an intelligent spend management platform that integrates market intelligence with spend control capabilities.", differentiator: "Data-Driven SaaS Procurement: Differentiates by combining its procurement workflow with a robust dataset of supplier and pricing intelligence." },
        { id: 18, symbol: "Kf", name: "Kissflow", marketCategory: "ORCH", website: "kissflow.com", size: "$1.03M Total Funding", description: "Kissflow Procurement Cloud is a flexible, modular procure-to-pay suite that enables businesses to streamline their procurement processes.", differentiator: "Workflow-Centric Flexibility: Built on a powerful low-code/no-code workflow platform, its key differentiator is its extreme flexibility and customizability." },
        { id: 19, symbol: "Ab", name: "Airbase", marketCategory: "ORCH", website: "airbase.com", size: "$91M Total Funding", description: "Airbase provides an all-in-one spend management platform that combines guided procurement, AP automation, and corporate cards.", differentiator: "Unified Spend Management: Differentiates by combining intake and procurement orchestration with its own corporate card and expense management modules." },
        // Heavy Elements
        { id: 101, symbol: "Ict", name: "Icertis", marketCategory: "CLM", website: "icertis.com", size: ">$250M ARR", description: "Icertis is a global leader in AI-powered contract intelligence, providing a platform that digitizes and structures contracts at scale.", differentiator: "AI-Powered Contract Intelligence: Positions itself as a pioneer in AI, transforming contracts from static documents into strategic assets." },
        { id: 102, symbol: "SAP", name: "SAP S/4HANA", marketCategory: "ERP", website: "sap.com", size: "$362.3B Market Cap", description: "A future-ready ERP system with built-in intelligent technologies, including AI, machine learning, and advanced analytics.", differentiator: "In-Memory Database and Simplified Data Model: Runs exclusively on the SAP HANA in-memory database, enabling real-time data processing." },
        { id: 103, symbol: "Cp", name: "Coupa", marketCategory: "S2P", website: "coupa.com", size: "$725M Revenue", description: "Coupa provides a cloud-based Business Spend Management (BSM) platform that offers a comprehensive suite of applications.", differentiator: "Unified BSM Platform and Community Intelligence: Differentiates with its user-centric, unified platform covering all aspects of spend." },
        { id: 104, symbol: "Zp", name: "Zip", marketCategory: "ORCH", website: "ziphq.com", size: "$333M Total Funding", description: "Zip provides an intake-to-pay platform that offers a single front door for employees to initiate any purchase or vendor request.", differentiator: "Intake-to-Pay Orchestration: Differentiates by focusing on the entire intake-to-pay lifecycle, providing an intuitive user experience." },
        { id: 105, symbol: "WH", name: "Workday HCM", marketCategory: "HRIS", website: "workday.com", size: "$7.26B Revenue", description: "Workday provides a leading enterprise cloud platform for Human Capital Management (HCM) and Financial Management.", differentiator: "Unified Cloud-Native Platform: Its core differentiator is its 'Power of One' architectureâ€”a single, unified, cloud-native system for HR and finance." },
        { id: 106, symbol: "SFg", name: "SAP Fieldglass", marketCategory: "VMS", website: "sap.com", size: "1,000 Employees", description: "SAP Fieldglass solutions simplify finding, engaging, and managing all types of external talent, helping businesses manage costs.", differentiator: "Global Reach and SAP Integration: Differentiates with its unparalleled global reach and deep, productized integrations with the SAP ecosystem." },
        { id: 107, symbol: "DS", name: "DocuSign", marketCategory: "SIG", website: "docusign.com", size: "$2.98B Revenue", description: "DocuSign is the market leader in electronic signatures and intelligent agreement management.", differentiator: "Market Leadership and Intelligent Agreement Management Platform: Differentiates as the #1 e-signature provider, leveraging its trusted global brand." },
        { id: 108, symbol: "CPr", name: "Coupa Procurement", marketCategory: "PO", website: "coupa.com", size: "Part of Coupa", description: "Coupa Procurement is part of Coupa's Business Spend Management platform, helping businesses control spending and purchasing.", differentiator: "User-Centric Experience and Unified Spend Management: Differentiates with its intuitive, 'consumerized' shopping experience." },
        { id: 109, symbol: "Opn", name: "OpenAI", marketCategory: "AIW", website: "openai.com", size: "$3.7B Est. Revenue", description: "OpenAI is an AI research and deployment company. Its GPT models are foundational technologies for many AI writing applications.", differentiator: "Foundational AI Research and Model Performance: Its primary differentiator is the state-of-the-art performance and versatility of its underlying models." },
        { id: 110, symbol: "Kv", name: "Keelvar", marketCategory: "AS", website: "keelvar.com", size: "$42.92M Funding", description: "Keelvar provides an AI-driven sourcing automation and optimization platform that uses sourcing bots to autonomously run sourcing events.", differentiator: "Sourcing Bots and Optimization: A pioneer in the space, its key differentiator is the use of intelligent sourcing bots that can autonomously manage RFQs." },
        { id: 111, symbol: "SAb", name: "SAP Ariba Sourcing", marketCategory: "BID", website: "sap.com", size: "Part of SAP", description: "A widely used e-sourcing solution for managing RFPs, RFQs, and e-auctions, integrated with the SAP Business Network.", differentiator: "Integration with SAP Business Network: Its primary differentiator is its deep integration with the world's largest B2B network." },
        { id: 112, symbol: "Av", name: "Aravo", marketCategory: "SRM", website: "aravo.com", size: "105 Employees", description: "Aravo provides a leading third-party risk management solution that helps organizations assess and monitor supplier compliance.", differentiator: "Deep Third-Party Risk Management Focus: Differentiates with its deep, purpose-built functionality for the entire third-party risk management lifecycle." },
        { id: 113, symbol: "Rfp", name: "RFPIO", marketCategory: "RFPW", website: "rfpio.com", size: "501-1,000 Employees", description: "A leading response management platform that helps sales, marketing, and proposal teams collaborate on and respond to RFPs.", differentiator: "AI-Powered Response Engine and Integrations: Differentiates with its AI-powered recommendation engine (RFPIO LookUp)." },
        { id: 114, symbol: "Sf", name: "Salesforce CPQ", marketCategory: "CPQ", website: "salesforce.com", size: "Part of Salesforce", description: "A cloud-based configure, price, quote solution native to the Salesforce platform, enabling sales teams to create accurate quotes.", differentiator: "Native Salesforce Integration: Its primary differentiator is being a native Salesforce application, offering seamless integration with Sales Cloud." },
        { id: 115, symbol: "SC", name: "SAP Concur", marketCategory: "EXP", website: "concur.com", size: "Part of SAP", description: "The market-leading provider of integrated travel, expense, and invoice management solutions.", differentiator: "Market Leadership and End-to-End T&E: Differentiates as the long-standing market leader with a comprehensive, end-to-end platform." },
        { id: 116, symbol: "Up", name: "Upwork Enterprise", marketCategory: "FMS", website: "upwork.com", size: "$689.1M Revenue", description: "The enterprise offering from the world's largest work marketplace, providing a freelancer management system.", differentiator: "Access to the World's Largest Talent Marketplace: Its primary differentiator is its direct, integrated access to Upwork's vast global marketplace." },
    ];

    const marketCategories = {
        "CLM": { name: "Contract Management Platforms (CLM)", description: "CLM platforms are software solutions that manage contracts throughout their entire lifecycle - from drafting and negotiation through approval, execution, compliance tracking, and renewal.", marketSize: "$1.26 B - $2.83 B (2024)", avgCAGR: "~12.7%", sources: "Grand View Research, Verified Market Research", color: { bg: '#E0F2FE', border: '#7DD3FC' } },
        "ERP": { name: "Enterprise Resource Management Platforms (ERP)", description: "Integrated business management software that manages a company's financials, supply chain, operations, commerce, reporting, manufacturing, and human resource activities.", marketSize: "$64.83 B - $81.15 B (2024)", avgCAGR: "~10-14%", sources: "Fortune Business Insights, Forbes", color: { bg: '#E0F2FE', border: '#7DD3FC' } },
        "S2P": { name: "Source-to-Pay Platforms (S2P)", description: "End-to-end procurement platforms that manage the entire process from strategic sourcing and contract management to purchasing, invoicing, and payments.", marketSize: "$8.03 B (2024)", avgCAGR: "~10.8%", sources: "Fortune Business Insights", color: { bg: '#E0E7FF', border: '#A5B4FC' } },
        "ORCH": { name: "Procurement Orchestration Platforms", description: "An intelligent 'front door' or workflow layer that sits on top of existing ERP and procurement systems to coordinate procurement activities.", marketSize: "$300 M - $500 M (2024)", avgCAGR: "~21.4%", sources: "Market Research Future, Global Market Estimates", color: { bg: '#E0E7FF', border: '#A5B4FC' } },
        "HRIS": { name: "HRIS and Workforce Management", description: "Platforms for managing core human resources (HRIS), payroll, benefits, talent acquisition, and workforce management (scheduling, time & attendance).", marketSize: "$17.79 B - $43 B (2024)", avgCAGR: "~8-19%", sources: "Global Growth Insights", color: { bg: '#F3E8FF', border: '#D8B4FE' } },
        "VMS": { name: "Vendor Management Platforms (VMS)", description: "Platforms focused on managing the lifecycle of the contingent (non-employee) workforce, including sourcing from staffing suppliers, onboarding, compliance, and invoicing.", marketSize: "$8.02 B (2024)", avgCAGR: "~10.9%", sources: "Business Research Insights", color: { bg: '#F3E8FF', border: '#D8B4FE' } },
        "SIG": { name: "Signature Management Platforms", description: "Primarily e-signature solutions that facilitate electronic signature collection, document routing, authentication, and audit trails.", marketSize: "$5.2 B - $9.8 B (2024)", avgCAGR: "~25-40%", sources: "Various market reports", color: { bg: '#D1FAE5', border: '#6EE7B7' } },
        "PO": { name: "Purchase Order Platforms", description: "Software that automates and streamlines the purchasing process, including purchase requisition, approval workflows, PO creation, and budget tracking.", marketSize: "$7.61 B - $8.03 B (2024)", avgCAGR: "~10-15%", sources: "OpenPR, Fortune Business Insights", color: { bg: '#E0E7FF', border: '#A5B4FC' } },
        "AIW": { name: "AI Writing Platforms", description: "Platforms powered by large language models (LLMs) that assist with or automate the creation of written content.", marketSize: "$421 M - $65 B (2024)", avgCAGR: "~17-36%", sources: "Verified Market Research, Market Research Future", color: { bg: '#FCE7F3', border: '#F9A8D4' } },
        "AS": { name: "Autonomous Sourcing Platforms", description: "AI-native platforms that use software 'bots' to automate sourcing events (e.g., RFQs) with minimal human intervention.", marketSize: "N/A (Captured in S2P)", avgCAGR: ">20%", sources: "Internal analysis based on S2P growth", color: { bg: '#FCE7F3', border: '#F9A8D4' } },
        "BID": { name: "Bidding Software in Procurement", description: "Also known as e-sourcing software, these tools manage competitive bidding events like RFPs, RFQs, and reverse auctions.", marketSize: "$1.8 B - $8.2 B (2024)", avgCAGR: "~8.38%", sources: "Various market reports", color: { bg: '#E0E7FF', border: '#A5B4FC' } },
        "SRM": { name: "Supplier Risk Management Platforms", description: "Software for assessing, monitoring, and mitigating risks associated with suppliers and third parties.", marketSize: "$7 B - $10.7 B (mid-2020s)", avgCAGR: "~15%", sources: "Various market reports", color: { bg: '#E0E7FF', border: '#A5B4FC' } },
        "RFPW": { name: "RFP Writing Software", description: "Also known as proposal management software, these platforms help sales and bid teams improve the efficiency and quality of their responses to RFPs.", marketSize: "$2.33 B (2022)", avgCAGR: "~12.2%", sources: "Various market reports", color: { bg: '#D1FAE5', border: '#6EE7B7' } },
        "CPQ": { name: "Configure Price Quote (CPQ) Software", description: "Sales tools that help companies define complex product configurations, manage pricing rules, and generate accurate quotes for B2B customers.", marketSize: "$2.15 B - $2.4 B (2024)", avgCAGR: "~12-37%", sources: "Various market reports", color: { bg: '#D1FAE5', border: '#6EE7B7' } },
        "EXP": { name: "Expense Management Software", description: "Software that automates the process of managing employee-initiated travel and entertainment (T&E) spend.", marketSize: "$3.60 B - $7.64 B (2024)", avgCAGR: "~10-13%", sources: "Fortune Business Insights", color: { bg: '#F3E8FF', border: '#D8B4FE' } },
        "FMS": { name: "Freelancer Management Platforms", description: "Platforms for sourcing, onboarding, managing projects for, and paying independent contractors and freelance talent.", marketSize: "$4.5 B - $6.0 B (2024)", avgCAGR: "~14.5%", sources: "Various market reports", color: { bg: '#F3E8FF', border: '#D8B4FE' } },
    };

    const heavyElementIds = new Set([101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116]);

    const elementPositions = {
        1: { row: 1, col: 1 }, 6: { row: 1, col: 2 },
        11: { row: 2, col: 1 }, 12: { row: 2, col: 2 }, 16: { row: 2, col: 3 }, 17: { row: 2, col: 4 }, 2: { row: 2, col: 9 }, 3: { row: 2, col: 10 }, 4: { row: 2, col: 11 }, 5: { row: 2, col: 12 },
        7: { row: 3, col: 9 }, 8: { row: 3, col: 10 }, 9: { row: 3, col: 11 }, 10: { row: 3, col: 12 }, 13: { row: 3, col: 13 }, 14: { row: 3, col: 14 },
        15: { row: 4, col: 13 }, 18: { row: 4, col: 14 },
        19: { row: 5, col: 14 },
    };

    const controlsContainer = document.getElementById('controls-container');
    const mainGrid = document.getElementById('main-grid');
    const heavyGrid = document.getElementById('heavy-elements-grid');
    const modalBackdrop = document.getElementById('modal-backdrop');
    const modalContent = document.getElementById('modal-content');

    let activeMarketCategory = null;

    function renderControls() {
        controlsContainer.innerHTML = `<label>Filter by Market Category:</label><div class="filter-buttons"></div>`;
        const filterButtonsContainer = controlsContainer.querySelector('.filter-buttons');

        const allBtn = document.createElement('button');
        allBtn.textContent = 'All';
        allBtn.className = activeMarketCategory === null ? 'active' : '';
        allBtn.addEventListener('click', () => {
            activeMarketCategory = null;
            render();
            closeModal();
        });
        filterButtonsContainer.appendChild(allBtn);

        Object.entries(marketCategories).forEach(([key, market]) => {
            const btn = document.createElement('button');
            btn.textContent = market.name;
            btn.className = activeMarketCategory === key ? 'active' : '';
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                if (activeMarketCategory === key) {
                    activeMarketCategory = null;
                    render();
                    closeModal();
                } else {
                    activeMarketCategory = key;
                    render();
                    showMarketModal(market);
                }
            });
            filterButtonsContainer.appendChild(btn);
        });
    }
    
    function createCard(company) {
        const marketInfo = marketCategories[company.marketCategory];
        const card = document.createElement('div');
        card.className = 'element-card';
        card.style.backgroundColor = marketInfo.color.bg;
        card.style.borderColor = marketInfo.color.border;
        card.innerHTML = `
            <div class="size-info">${company.size}</div>
            <div class="symbol">${company.symbol}</div>
            <div class="name">${company.name}</div>
        `;

        if (activeMarketCategory && company.marketCategory !== activeMarketCategory) {
            card.classList.add('filtered-out');
        }

        card.addEventListener('click', () => showCompanyModal(company));
        return card;
    }


    function renderGrids() {
        mainGrid.innerHTML = '';
        heavyGrid.innerHTML = '';

        companies.forEach(company => {
            const card = createCard(company);
            if (heavyElementIds.has(company.id)) {
                heavyGrid.appendChild(card);
            } else {
                const position = elementPositions[company.id];
                if(position) {
                    card.style.gridColumnStart = position.col;
                    card.style.gridRowStart = position.row;
                }
                mainGrid.appendChild(card);
            }
        });
    }
    
    function render() {
        renderControls();
        renderGrids();
    }

    function showCompanyModal(company) {
        const marketInfo = marketCategories[company.marketCategory];
        modalContent.innerHTML = `
            <button class="modal-close-btn" onclick="closeModal()">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
            <div class="modal-header"><h2>${company.name}</h2></div>
            <div class="modal-body">
                <div class="info-grid">
                    <div><span>Website</span> <a href="https://${company.website}" target="_blank">${company.website}</a></div>
                    <div><span>Company Size</span> ${company.size}</div>
                    <div><span>Market Category</span> ${marketInfo.name}</div>
                </div>
                <h3>Description</h3><p>${company.description}</p>
                <h3>Differentiator</h3><p>${company.differentiator}</p>
            </div>
        `;
        modalBackdrop.classList.add('visible');
    }

    function showMarketModal(market) {
        modalContent.innerHTML = `
            <button class="modal-close-btn" onclick="closeModal()">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
            <div class="modal-header"><h2>${market.name}</h2></div>
            <div class="modal-body">
                <h3>Market Overview</h3>
                <p>${market.description}</p>
                <div class="info-grid">
                    <div><span>Market Size</span> ${market.marketSize}</div>
                    <div><span>Avg. CAGR</span> ${market.avgCAGR}</div>
                    <div><span>Sources</span> ${market.sources}</div>
                </div>
            </div>
        `;
        modalBackdrop.classList.add('visible');
    }
    
    // Make modal functions globally accessible for inline onclick handlers
    window.closeModal = () => {
        modalBackdrop.classList.remove('visible');
    };
    window.showCompanyModal = showCompanyModal;
    
    modalBackdrop.addEventListener('click', (e) => {
        if (e.target === modalBackdrop) closeModal();
    });

    // Initial Render
    render();
})();
</script>
</body>
</html>
